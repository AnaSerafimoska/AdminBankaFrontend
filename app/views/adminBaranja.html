
<section class="wrapper" ng-controller="adminBaranjaCtrl">

  <ng-include src="'views/header.html'"></ng-include>
  <!-- Content Header (Page header) -->

  <div class="content-wrapper">

	<section class="content-header" >
		<h1 style="font-size: 19px; padding: 10px; padding: 0px;"> Внесување на барања </h1>
	</section>

	 <section class="content" > 

    	 <div class=" box box-success  ">
    	 	<div class="box-header with-border">
    	 		<h3 class="box-title">Сними барање</h3>
    	 	</div>

			<div class=" box-body" style="margin-left: -10px ">
						<div class=" row col-md-12 " style=" margin-left: 9px;">
							<label style=" padding-right: 15px;">Име и презиме: {{KorisnikPrikazInfo.ImePrezime}}    </label>
							<label style="padding-left: 15px; padding-right: 15px;">Лична карта: {{KorisnikPrikazInfo.BrLicnaKarta }}    </label>
							<label style="padding-left: 15px; padding-right: 15px;">Адреса: {{KorisnikPrikazInfo.Adresa}}    </label>
							<label style="padding-left: 15px; padding-right: 15px;">Тел/Моб: {{KorisnikPrikazInfo.TelefonskiBroj}}    </label>
						</div>
						<div class=" row  box-header " style="margin-top: 37px;">
	        				<div class="col-md-4">
	        						<label class="col-md-5" >Единствен број:</label>
	        						<div class="col-md-7">
	        							<input  type="text" class=" input-sm " ng-model="korisnik.embg" ></input>
	        						</div>
	        				</div>

							<div class=" col-md-4">
				        		<label class="col-md-5">Тип на продукт:</label>
				        		<div class="col-md-7">
				                    <select class="form-control ng-touched ng-invalid ng-valid ng-pristine ng-empty" ng-change="zemiSelektiranTipNaProdukt(selectiranTip)"  ng-model="selectiranTip" ng-disabled="">
				                    	<option></option>
                    					<option ng-repeat="productType in productTypes" value="{{productType.ProductTypeID}}"   >{{productType.ProductTypeID}}-{{productType.Description}}</option>
				                  	</select>
			                  	</div>
			                </div>
	        			</div>
	        			<div class="row box-header">
	        				<div  class=" col-md-4">
	        					<label class="col-md-5">Број на барање:</label>
	        					<div class="col-md-7">
	        						<input type="text" class=" input-sm " ng-model="korisnik.BrBaranje" style ="border: 1px solid rgba(128, 128, 128, 0.22); background-color: #f4f4f4;" ng-disabled="flag"></input>
	        					</div>
	        				</div>
	        				<div class="col-md-4">
	        					<label class="col-md-5">Датум барање:</label>
	        					<div class="col-md-7">
	        					<input type="text" class=" input-sm " ng-model="korisnik.datum" ng-disabled="flag" style ="border: 1px solid rgba(128, 128, 128, 0.22); background-color: #f4f4f4;"></input>
	        					</div>
	        				</div>
							<div class="col-md-4 ">
		        					<label class="col-md-5 ">Корисничко име:</label>
		        					<div class="col-md-7">
		        						<input type="text" class=" input-sm " ng-model="korisnik.korisnichkoIme"  style ="border: 1px solid rgba(128, 128, 128, 0.22); "></input>
		        					</div>
	        				</div>
	        			</div>

		        		<div class="col-md-12 box-header with-border "></div>

			        	<div class=" row col-md-12 box-header pull-right "> 
			        		<!-- <button class="btn btn-default text-right pull-right btn-sm" style="color: white;background-color: #00a65a; float:right; width: 75px;" ng-click="" ng-disabled="">  Сними </button> -->
			        		<button class="btn btn-default text-right pull-right btn-sm" style="color:white; background-color: #3c8dbc; float:right; margin-right: 15px;" ng-click="zemiPodatociPo_EMBG(korisnik.embg); setVisibility();zemiPodatoci_CORE(korisnik.embg)" ng-disabled="">  Прикажи </button>
			        	</div>
	        	<!--  ************** KRAJ NA FORMA ZA VNES NA EMBG *****************************************************       -->


				<!--  ************** TABELA ZA PRIKAZ NA PODATOCI PO SMETKA - FORMA ZA VNES NA EMBG************************-->
		        		<div class="col-md-12 box-header " ng-show="flagVisibilityTabs">
		        			<table id="example2" class="table table-bordered table-hover dataTable" role="grid" aria-describedby="example2_info">
		        			<tr style="background-color: #00A65A;color: white;">
		        				<th class="sorting_asc" tabindex="0" aria-controls="example2" rowspan="1" colspan="1" aria-sort="ascending" aria-label="Rendering engine: activate to sort column descending">Вид работа</th>

		        				<th class="sorting_asc" tabindex="0" aria-controls="example2" rowspan="1" colspan="1" aria-sort="ascending" aria-label="Rendering engine: activate to sort column descending">Партија</th>

		        				<th class="sorting_asc" tabindex="0" aria-controls="example2" rowspan="1" colspan="1" aria-sort="ascending" aria-label="Rendering engine: activate to sort column descending">Назив на сметка</th>

		        				<th class="sorting_asc" tabindex="0" aria-controls="example2" rowspan="1" colspan="1" aria-sort="ascending" aria-label="Rendering engine: activate to sort column descending">Функција</th>

		        				<th class="sorting_asc" tabindex="0" aria-controls="example2" rowspan="1" colspan="1" aria-sort="ascending" aria-label="Rendering engine: activate to sort column descending">Сервис</th>

		        				<th class="sorting_asc" tabindex="0" aria-controls="example2" rowspan="1" colspan="1" aria-sort="ascending" aria-label="Rendering engine: activate to sort column descending">Сервис привилегија</th>

		        				<th class="sorting_asc" tabindex="0" aria-controls="example2" rowspan="1" colspan="1" aria-sort="ascending" aria-label="Rendering engine: activate to sort column descending">Вид апликација</th>

		        				<th class="sorting_asc" tabindex="0" aria-controls="example2" rowspan="1" colspan="1" aria-sort="ascending" aria-label="Rendering engine: activate to sort column descending">Е-маил</th>

		        			<!-- 	<th class="sorting_asc" tabindex="0" aria-controls="example2" rowspan="1" colspan="1" aria-sort="ascending" aria-label="Rendering engine: activate to sort column descending">Телефонски број</th> -->
		        			</tr>
		        				<!--  ************** REDOVI VO TABELA TUKA *********************************       -->
		        			<tbody >

		        				<tr ng-repeat=" y in temp" ng-class="{'selected':$index == selectedRow}"  ng-click="setClickedRow($index); previewForEdit(y);">
		        					<td >{{y["ВидРабота"]}} </td>
		        					<td >{{y["Партија"]}} </td>
		        					<td >{{y["Име и презиме"]}} </td>
		        					<td >{{y["Функција"]}} </td>
		        					<td >{{y["ШифраСервис"]}} </td>
		        					<td >{{y["SifraPrivilegija"]}} </td>
		        					<td >{{y["VidAplikacija"]}} </td>
		        					<td >{{y["Меил"]}} </td>
		        					<!-- <td >{{y["TelefonskiBroj"]}} </td> -->
		        				</tr>
		        			</tbody>

		        		</table>
		        	</div>
        			<div class=" row pull-right" ng-show="flagVisibilityTabs"> 
						<button class="btn btn-default text-right btn-sm box-header with-border" style="color:white; background-color: #337ab7;margin-right: 30px;margin-bottom: 20px; margin-top: -20px;" ng-click="prikazhi()" >  Додади сметка </button>
					</div>

					<!--********  DINAMICHKI DEL PRIKAZ NA FORMA PRI KLIK NA SMETKA **************************************************-->
					<div class=" col-md-12 box-header with-border" style="background-color: rgba(238, 238, 238, 0.37);" ng-show="prikazNaFormaDinamichka">

						<form novalidate name="form" >
					        <div class="box-body" >
					          <div   ng-repeat="item in productsBodyNew track by $index ">
					          <!--************************************* Textbox ***************************************************-->
					                  <div class="row " ng-if="item.FieldType=='TextBox'" >
					                      <label class=" col-md-2 control-label " >{{item.FieldDescription}}</label>
					                      <div class="col-md-3 ">
					                        <input class="form-control ng-touched ng-invalid ng-valid " ng-required="{{item.Mandatory=='М'}}" dynamic-model="'temp.'+item.FieldName" type="{{item.FieldType}}" maxlength="{{item.FieldLength}}" value="{{item.DefaultValue}}" />
					                      </div>
					                  </div>

					          <!--************************************** Number *********************************************-->
					                  <div class="row "    ng-if="item.FieldType=='Number' ">

					                    <label class=" col-md-2 control-label ">{{item.FieldDescription}}</label>
					                    <div class="col-md-3 ">
					                      <input class="form-control ng-touched ng-invalid ng-valid " ng-required="{{item.Mandatory=='М'}}" dynamic-model="'temp.'+item.FieldName"  type="{{item.FieldType}}" min="0" maxlength="{{item.FieldLength}}" value="{{item.DefaultValue}}" />
					                    </div>
					                  </div>
					          <!--*********************************** Input-Number *****************************************-->
					                  <div class="row "  ng-if="item.FieldType=='Input-Number' ">
					                    <label class=" col-md-2 control-label ">{{item.FieldDescription}}</label>
					                    <div class="col-md-3 ">
					                      <input class="form-control ng-touched ng-invalid ng-valid" ng-required="{{item.Mandatory=='М'}}" dynamic-model="'temp.'+item.FieldName"  type="text" mask="9"  restrict="reject"  repeat="{{item.FieldLength}}"   />
					                    </div>
					                  </div>


					          <!--************************************** Datepicker ********************************88-->
					                  <div class="row"    ng-if="item.FieldType=='Datepicker' ">

					                    <label class=" col-md-2 control-label ">{{item.FieldDescription}}</label>
					                    <div class="col-md-3 ">
					                      <div class=" input-group ">
					                        <input  dynamic-model="'temp.'+item.FieldName" ng-required="{{item.Mandatory=='М'}}" class="form-control ng-touched ng-invalid ng-valid" type="{{item.FieldType}}" ng-change="filter( item.FieldName )" data-date-format="dd-MM-yyyy" data-date-type="date" data-autoclose="1" bs-datepicker />
					                        <div class="input-group-addon " id="date" >
					                          <i class="fa fa-calendar"  ></i>
					                        </div>
					                      </div>
					                   </div>
					                  </div>

					          <!-- Textarea -->
					                  <div class="row "ng-model="item.FieldName"  ng-if="item.FieldType=='Textarea' ">

					                    <label class=" col-md-2 control-label ">{{item.FieldDescription}}</label>
					                    <div class="col-md-3 ">
					                      <textarea class="form-control ng-touched ng-invalid ng-valid" ng-required="{{item.Mandatory=='М'}}" dynamic-model="'temp.'+item.FieldName" rows="3"   ></textarea>
					                    </div>
					                  </div>

					          <!-- Checkbox-->
					                  <div class="row "  ng-if="item.FieldType=='Checkbox' ">


					                    <div class="col-md-1 ">
					                      <input class="pull-right" dynamic-model="'temp.'+item.FieldName"   type="checkbox"  >
					                    </div>
					                    <label class=" col-md-3 control-label ">{{item.FieldDescription}}</label>
					                  </div>

					          <!-- Dropdown -->
					                  <div class="row "  ng-if="item.FieldType=='Dropdown' ">

					                    <label class=" col-md-2 control-label">{{item.FieldDescription}}</label>
					                    <div class="col-md-3 " >

					                     <ui-select dynamic-model="'temp.'+item.FieldName" ng-required="{{item.Mandatory=='М'}}" style="width: 267px;" ng-model="temp"  theme="select2"  >

					                        <ui-select-match placeholder="{{item.DefaultValue}}"></ui-select-match>

					                          <ui-select-choices repeat="temp in item.ControlType  | filter: $select.search">

					                            <div ng-repeat="tmp in temp">
					                              <div ng-bind-html="tmp |  highlight: $select.search"></div>
					                            </div>

					                          </ui-select-choices>
					                      </ui-select>

					                    </div>

					                  </div>

					            <!-- Buttons-->

					            <div class="col-md-4"   ng-if=" item.FieldType=='ButtonCancel' ">
					              <div class="pull-right"  >
					                <button class="btn btn-default" value="{{item.DefaultValue}}" ><i class="fa fa-fw fa-ban"></i>{{item.DefaultValue}}</button>

					              </div>
					            </div>
					            <div class="col-md-2" style="padding-left: 0px;"  ng-if=" item.FieldType=='ButtonSuccess' ">
					              <div class="pull-left" >
					                <button class="btn btn-success " ng-disabled="form.$invalid" ng-click="submit(item.FillApi)" style="background-color: #00a65a; "   value="{{item.DefaultValue}}" ><i class="fa fa-fw fa-save"></i> {{item.DefaultValue}}</button>

					              </div>
					            </div>





					          </div>


					        </div>
					     </form><!--**************   kraj na dinamichka forma ***********************-->
					</div>

					<div class=" row col-md-12 pull-right box-header "  ng-show="prikazNaFormaDinamichka"> 
						<button class="btn btn-success text-right btn-sm" style="float:right; margin-right: 15px;" ng-click="snimiBaranje()" ng-disabled="">  Сними барање </button>
					</div>
			</div>
		</div>
	</section>

